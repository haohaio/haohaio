<!DOCTYPE HTML>
<html class="no-js" lang="zh-CN">
<!--
//                            _ooOoo_
//                           o8888888o
//                           88" . "88
//                           (| -_- |)
//                            O\ = /O
//                        ____/`---'\____
//                      .   ' \\| |// `.
//                       / \\||| : |||// \
//                     / _||||| -:- |||||- \
//                       | | \\\ - /// | |
//                     | \_| ''\---/'' | |
//                      \ .-\__ `-` ___/-. /
//                   ___`. .' /--.--\ `. . __
//                ."" '< `.___\_<|>_/___.' >'"".
//               | | : `- \`.;`\ _ /`;.`/ - ` : | |
//                 \ \ `-. \_ __\ /__ _/ .-` / /
//         ======`-.____`-.___\_____/___.-`____.-'======
//                            `=---='
//                 拦截插件累计拦截逗比攻击"1381438"次！
//         .............................................
//                  佛祖保佑             永无BUG
//          佛曰:
//                  写字楼里写字间，写字间里程序员；
//                  程序人员写程序，又拿程序换酒钱。
//                  酒醒只在网上坐，酒醉还来网下眠；
//                  酒醉酒醒日复日，网上网下年复年。
//                  但愿老死电脑间，不愿鞠躬老板前；
//                  奔驰宝马贵者趣，公交自行程序员。
//                  别人笑我忒疯癫，我笑自己命太贱；
//                  不见满街漂亮妹，哪个归得程序员？
-->

<head><meta name="generator" content="Hexo 3.9.0">
    <!--[if lte IE 9]>
<meta http-equiv="refresh" content="0;url=https://haohaio.github.io/warn.html">
<![endif]-->
<meta charset="utf-8">

<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no">
<meta http-equiv="mobile-agent" content="format=html5; url=https://haohaio.github.io">
<meta name="author" content="haohaio">
<link rel="stylesheet" href="../css/SimpleStyle.min.css">
<link rel="stylesheet" href="../css/custom.css">

<link rel="shortcut icon" href="../images/favicon.png">


<title>
    
    vue 之 patchflags -
    
    灏絯喔
    
</title>

<meta name="keywords" content="IT，技术博客，笔记">

<meta name="description " content="好记性不如烂笔头">
</head>

<body>
    <div id="nav">
    <nav class="nav-menu">
        <a class="site-name current" href="/" title="嗨">嗨</a>
        <a class="site-index current" href="/"><i class="fa fa-home"></i><span>首页</span></a>
        <a href="/archives" title="归档"><i class="fa fa-archives"></i><span>归档</span></a>
        <a href="/tags" title="标签"><i class="fa fa-tags"></i><span>标签</span></a>
        <!-- custom single page of menus -->
        
        
        <a href="/help" title="帮助">
            <i class="fa fa-question-circle"></i>
            <span>帮助</span>
        </a>
        
    </nav>
</div>

    <div class="nav-user">
    <a class="btn-search" href="#"><i class="fa fa-search"></i></a>
    <a class="btn-read-mode" href="#"><i class="fa fa-sun-o"></i></a>
    <a class="btn-sns-qr" href="javascript:"><i class="fa fa-weixin"></i></a>
</div>
    <div id="wrapper" class="clearfix">
        <div id="body">
            <div class="main" id="main">
                <div id="cover">
    <div class="cover-img"></div>
    <div class="cover-info">
        
        <img class="avatar" width="72" src="/images/favicon.png" alt="avatar">
        
        <h1 class="cover-siteName">haohaio</h1>
        <h3 class="cover-siteTitle">努力学习，艰苦奋斗</h3>
        <p class="cover-siteDesc">写写代码，记记笔记</p>
        <div class="cover-sns">
            
        </div>
    </div>
</div>
                <div class="page-title">
    <ul>
        <li><a href="/">最新</a></li>
        
            
                <li class="active">
                    <a href="/categories/front-end" data-name="前端">前端</a>
                </li>
            
                <li class>
                    <a href="/categories/back-end" data-name="后端">后端</a>
                </li>
            
                <li class>
                    <a href="/categories/data-structure" data-name="数据结构">数据结构</a>
                </li>
            
                <li class>
                    <a href="/categories/others" data-name="其它">其它</a>
                </li>
            
        
        <li class="page-search">
    <form id="search" class="search-form">
        <label for="s" class="sr-only">请输入关键字</label>
        <input class="search-field" type="text" name="s" placeholder="请输入关键字">
        <button type="submit" class="search-form-submit" title="搜索"><i class="fa fa-search"></i></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(无标题)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '../content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
</li>

    </ul>
</div>
<div class="main-inner">
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
        <div class="post-header">
            <div class="post-author clearfix">
                <a class="avatar fleft" href="https://haohaio.github.io" target="_blank">
                    <img width="48" src="/images/favicon.png" alt="avatar">
                </a>
                <p><span class="label">作者</span>
                    <a href="https://haohaio.github.io" target="_blank">haohaio</a>
                    <span title="最后编辑于2020-04-26">2020-04-26</span>
                </p>
                <p>写写代码，记记笔记</p>
            </div>
            <h2 class="post-title">Vue 之 PatchFlags</h2>
            <div class="post-meta">
                本文总共5168个字 | 您是第<span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span>位看到它们的小伙伴
            </div>
        </div>
        <div class="post-content markdown-body">
            <p>在 4 月 21 日晚，Vue 作者尤雨溪在 B 站直播分享了 <code>Vue.js 3.0 Beta</code> 最新进展。</p>
<p>其中在介绍性能提升方面时，提到了编译模板的优化。例如下面的模板代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"highlight"</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>会被编译成：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createVNode <span class="keyword">as</span> _createVNode, toDisplayString <span class="keyword">as</span> _toDisplayString, openBlock <span class="keyword">as</span> _openBlock, createBlock <span class="keyword">as</span> _createBlock &#125; <span class="keyword">from</span> <span class="string">"vue"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">_ctx, _cache</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (_openBlock(), _createBlock(<span class="string">"div"</span>, <span class="literal">null</span>, [</span><br><span class="line">    _createVNode(<span class="string">"span"</span>),</span><br><span class="line">    _createVNode(<span class="string">"span"</span>, &#123; <span class="attr">class</span>: <span class="string">"highlight"</span> &#125;, _toDisplayString(_ctx.msg), <span class="number">1</span> <span class="comment">/* TEXT */</span>)</span><br><span class="line">  ]))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到，创建第二个虚拟 DOM <code>span</code> 时，最后一个参数为 <code>1 /* TEXT */</code>。这个 <code>1</code> 就是一个 <code>PatchFlag</code>，代表具有动态的 <code>textContent</code>。在更新的时候，通过枚举值判断，只会比较该节点文字的变化，无需再去比较其它属性的变化。</p>
<blockquote>
<p>在新版本的 Vue 中，只会对带有 PatchFlag 的节点进行真正的追踪。</p>
</blockquote>
<p>可以看下源码中对 <code>PatchFlag</code> 枚举值是如何定义的：<a href="https://github.com/vuejs/vue-next/blob/c11905fe36adbcbb58c4fc02144e81ccdfaceda6/packages/shared/src/patchFlags.ts" target="_blank" rel="noopener">vue-next patchFlags</a></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="keyword">enum</span> PatchFlags &#123;</span><br><span class="line">  TEXT = <span class="number">1</span>, <span class="comment">// 表示具有动态textContent的元素</span></span><br><span class="line">  CLASS = <span class="number">1</span> &lt;&lt; <span class="number">1</span>, <span class="comment">// 表示有动态Class的元素</span></span><br><span class="line">  STYLE = <span class="number">1</span> &lt;&lt; <span class="number">2</span>, <span class="comment">// 表示有动态样式的元素</span></span><br><span class="line">  PROPS = <span class="number">1</span> &lt;&lt; <span class="number">3</span>, <span class="comment">// 表示具有非类/样式动态道具的元素。(组件定义的 class 和 style 也属于 PROPS)</span></span><br><span class="line">  FULL_PROPS = <span class="number">1</span> &lt;&lt; <span class="number">4</span>, <span class="comment">// 表示带有动态键的道具的元素，与上面 CLASS, STYLE and PROPS 相斥</span></span><br><span class="line">  HYDRATE_EVENTS = <span class="number">1</span> &lt;&lt; <span class="number">5</span>, <span class="comment">// 表示带有事件监听器的元素</span></span><br><span class="line">  STABLE_FRAGMENT = <span class="number">1</span> &lt;&lt; <span class="number">6</span>, <span class="comment">// 表示子元素顺序不变的 fragment。(在React中，有一个React.Fragments，其作用就是说在一个组件返回多个元素，意味着组件下根节点不只一个。新版本的 Vue 中 template 支持多个根节点了，不需要用一个根节点包裹所有的元素了，render 可以返回一个数组。新版本的 Vue 会把这些自动的变成 fragment，特别在模板语法中时无感知的)</span></span><br><span class="line">  KEYED_FRAGMENT = <span class="number">1</span> &lt;&lt; <span class="number">7</span>, <span class="comment">// 表示子元素有 key或部分子元素有 key 的 fragment</span></span><br><span class="line">  UNKEYED_FRAGMENT = <span class="number">1</span> &lt;&lt; <span class="number">8</span>, <span class="comment">// 表示带有无key绑定的 fragment</span></span><br><span class="line">  NEED_PATCH = <span class="number">1</span> &lt;&lt; <span class="number">9</span>, <span class="comment">// 表示只需要非属性比较的元素，例如 ref 或 directives</span></span><br><span class="line">  DYNAMIC_SLOTS = <span class="number">1</span> &lt;&lt; <span class="number">10</span>, <span class="comment">// 表示具有动态插槽的元素</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 特殊 FLAGS： 负整数表示永远不会用作diff,只需检查 patchFlag === FLAG.</span></span><br><span class="line"></span><br><span class="line">  HOISTED = <span class="number">-1</span>, <span class="comment">// 表示静态节点</span></span><br><span class="line">  BAIL = <span class="number">-2</span>, <span class="comment">// 与 renderSlot() 相关</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="枚举与位运算"><a href="#枚举与位运算" class="headerlink" title="枚举与位运算"></a>枚举与位运算</h3><p>可以看到上面源码中使用了位操作符对枚举值进行定义，接下来我们来了解一下为什么这么写。</p>
<h4 id="位运算概览"><a href="#位运算概览" class="headerlink" title="位运算概览"></a>位运算概览</h4><p>位运算就是直接对整数在内存中的二进制位进行操作。接下来我们先来系统的了解下位运算的各种操作符。</p>
<h5 id="按位与运算符（-amp-）"><a href="#按位与运算符（-amp-）" class="headerlink" title="按位与运算符（&amp;）"></a>按位与运算符（&amp;）</h5><p><code>&amp;</code> 运算符表示按位与，即两个位都为 1 时，结果才为 1，例如 <code>3 &amp; 5</code>，即 <code>0000 0011 &amp; 0000 0101</code>，结果为 <code>0000 0001</code>。即 <code>3 &amp; 5</code> 的值为 1。</p>
<h5 id="按位或运算符（-）"><a href="#按位或运算符（-）" class="headerlink" title="按位或运算符（|）"></a>按位或运算符（|）</h5><p><code>|</code> 运算符表示按位或，即两个位有一位为 1 时，结果就为 1，例如 <code>3 | 5</code>，即 <code>0000 0011 &amp; 0000 0101</code>，结果为 <code>0000 0111</code>，即 <code>3 | 5</code> 的值为 7。</p>
<h5 id="按位异或运算符（-）"><a href="#按位异或运算符（-）" class="headerlink" title="按位异或运算符（^）"></a>按位异或运算符（^）</h5><p><code>^</code> 运算符表示按位异或，即两个位相同时结果为 0，相异时结果为 1。例如 <code>3 ^ 5</code>，即 <code>0000 0011 &amp; 0000 0101</code>，结果为 <code>0000 0110</code>，即 <code>3 &amp; 5</code> 的值为 6。</p>
<h5 id="按位取反运算符（-）"><a href="#按位取反运算符（-）" class="headerlink" title="按位取反运算符（~）"></a>按位取反运算符（~）</h5><p><code>~</code> 运算符表示按位取反，即对一个二进制数按位取反，即将 0 变 1， 1 变 0。例如 <code>~3</code>，即将 <code>0000 0011</code> 变成 <code>1111 1100</code>。很明显是一个负数。现在计算机普遍使用补码表示负数，补码转换成原码就是等于其绝对值取反然后末尾加 1，先绝对值取反就是 <code>1000 0011</code>，末尾加 1，变成<code>1000 0100</code>，即 <code>~3</code> 的值为 <code></code>-4`</p>
<h5 id="左移运算符（-lt-lt-）"><a href="#左移运算符（-lt-lt-）" class="headerlink" title="左移运算符（&lt;&lt;）"></a>左移运算符（&lt;&lt;）</h5><p><code>&lt;&lt;</code> 表示把各二进位全部左移若干位，高位丢弃，低位补0。例如二进制 <code>1010 1110</code> 左移两位就是 <code>1011 1000</code>。</p>
<h5 id="右移运算符（-gt-gt-）"><a href="#右移运算符（-gt-gt-）" class="headerlink" title="右移运算符（&gt;&gt;）"></a>右移运算符（&gt;&gt;）</h5><p><code>&gt;&gt;</code> 表示把各二进位全部右移若干位，对无符号数，高位补0，有符号数，各编译器处理方法不一样，有的补符号位（算术右移），有的补0（逻辑右移）。</p>
<h3 id="PatchFlags-中的枚举值"><a href="#PatchFlags-中的枚举值" class="headerlink" title="PatchFlags 中的枚举值"></a>PatchFlags 中的枚举值</h3><p>再来看一下 <code>PatchFlags</code>  中定义的枚值就很清楚了：</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="keyword">enum</span> PatchFlags &#123;</span><br><span class="line">  TEXT = <span class="number">1</span>, <span class="comment">// 1  二进制: 0000 0001 (1)</span></span><br><span class="line">  CLASS = <span class="number">1</span> &lt;&lt; <span class="number">1</span>, <span class="comment">// 二进制: 0000 0010 (2)</span></span><br><span class="line">  STYLE = <span class="number">1</span> &lt;&lt; <span class="number">2</span>, <span class="comment">// 二进制: 0000 0100 (4)</span></span><br><span class="line">  PROPS = <span class="number">1</span> &lt;&lt; <span class="number">3</span>, <span class="comment">// 二进制:  0000 1000 (8)</span></span><br><span class="line">  FULL_PROPS = <span class="number">1</span> &lt;&lt; <span class="number">4</span> <span class="comment">//  二进制: 0001 0000 (16)</span></span><br></pre></td></tr></table></figure>
<p>通过观察可以看到，每个枚举值的二进制数中都只有一个 1，通过左移的位数不同来进行区分。就是通过这个特点，我们可以方便的进行多枚举值情况的处理。</p>
<p>接下来我们看下当同时需要对 TEXT 和 PROPS 需要进行 patching 时，<code>PatchFlag</code> 的枚举值是多少</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">:id</span>=<span class="string">"123"</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createVNode <span class="keyword">as</span> _createVNode, toDisplayString <span class="keyword">as</span> _toDisplayString, openBlock <span class="keyword">as</span> _openBlock, createBlock <span class="keyword">as</span> _createBlock &#125; <span class="keyword">from</span> <span class="string">"vue"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">_ctx, _cache</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (_openBlock(), _createBlock(<span class="string">"div"</span>, <span class="literal">null</span>, [</span><br><span class="line">    _createVNode(<span class="string">"span"</span>),</span><br><span class="line">    _createVNode(<span class="string">"span"</span>, &#123; id: _ctx.id &#125;, _toDisplayString(_ctx.msg), <span class="number">9</span> <span class="comment">/* TEXT, PROPS */</span>, [<span class="string">"id"</span>])</span><br><span class="line">  ]))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到 <code>PatchFlag</code> 的值为 <code>9 /* TEXT, PROPS */</code>。</p>
<ul>
<li>那么 9 是如何得来的呢？</li>
</ul>
<p>其实就是通过按位或运算得来的。<code>TEXT</code> 对应的二进制为 <code>0000 0001</code>，<code>PROPS</code> 对应的二进制为 <code>0000 1000</code>，执行按位或运算后结果就是 <code>0000 1001</code>，也就是 9 了。</p>
<ul>
<li>那我们如何通过 9 来判断包含了枚举值 <code>TEXT</code> 和 <code>PROPS</code> 呢？</li>
</ul>
<p>其实是通过按位与运算来判断的。<code>TEXT</code> 的值为 1，<code>9 &amp; 1</code> 的值，二进制为 <code>0000 0001</code>，值为 1。<code>PROPS</code> 的值为 8，<code>9 &amp; 8</code> 的值，二进制为 <code>0000 1000</code>，值为 8。值都不为 0，那么转换成布尔值的话就都是 <code>true</code>。</p>
<p>现在再来看下 9 的二进制表示： <code>0000 1001</code>。可以看到有 2 个 <code>1</code>，第一个 1 与 <code>PROPS</code>(8) 二进制数 <code>0000 1000</code> 中的 1 位置相同，第二个 1 与 <code>TEXT</code>(1) 二进制数 <code>0000 0001</code> 中的 1 位置相同。如果第一次接触位运算的话，到这里是不是恍然大悟了呢。通过按位或运算和按位与运算，可以很方便的处理多枚举的情况哦 ~~</p>
<p>在源码 <code>vue-next/packages/runtime-core/src/componentRenderUtils.ts</code> 的 <code>shouldUpdateComponent</code> 方法中，有这样一段代码，我们来看一下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (patchFlag &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (patchFlag &amp; PatchFlags.DYNAMIC_SLOTS) &#123;</span><br><span class="line">    <span class="comment">// slot content that references values that might have changed,</span></span><br><span class="line">    <span class="comment">// e.g. in a v-for</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (patchFlag &amp; PatchFlags.FULL_PROPS) &#123;</span><br><span class="line">    <span class="comment">// presence of this flag indicates props are always non-null</span></span><br><span class="line">    <span class="keyword">return</span> hasPropsChanged(prevProps!, nextProps!)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (patchFlag &amp; PatchFlags.PROPS) &#123;</span><br><span class="line">    <span class="keyword">const</span> dynamicProps = nextVNode.dynamicProps!</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dynamicProps.length; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> key = dynamicProps[i]</span><br><span class="line">      <span class="keyword">if</span> (nextProps![key] !== prevProps![key]) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到 Vue 中就是使用按位与运算（&amp;）来判断枚举值的 ~~</p>
<h3 id="位运算编程小技巧"><a href="#位运算编程小技巧" class="headerlink" title="位运算编程小技巧"></a>位运算编程小技巧</h3><h4 id="奇偶数判断"><a href="#奇偶数判断" class="headerlink" title="奇偶数判断"></a>奇偶数判断</h4><p>当一个数为奇数时，那么其二进制末位肯定为 1。当其与 1 执行按位与运算时，则结果肯定为 1。反之，偶数的二进制末位肯定为 0，当其与 1 执行按位与运算时，则结果肯定为 0。因此，可以通过位运算很方便的写一个判断奇偶数的方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> isOdd = <span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> !!(num &amp; <span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="乘以2-和-除以-2"><a href="#乘以2-和-除以-2" class="headerlink" title="乘以2 和 除以 2"></a>乘以2 和 除以 2</h4><p>看到上面枚举值可以看到左移一位就是乘以2，那么右移一位就是除以2了，但是这个除以 2 和 JavaScript 中的除以 2 还是有些不同的，比如 3 的二进制为 <code>0011</code>，那么右移一位为 <code>0001</code>，等于 1，相当于 JavaScript 中除以 2 后向下取整了。</p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>本文对 Vue 3.0 中的 PatchFlags 做了一些了解，更多的是对位运算重新学习了一遍 ~~</p>

        </div>
        <div class="post-tool">
            <a class="btn-thumbs-up" href="javascript:void(0);" data-cid="52" title="95">
                <i class="fa fa-thumbs-up" aria-hidden="true"></i> 打赏
            </a>
        </div>
        
        <div class="post-tags">标签：
            
            <a href="../tags/javascript/">JavaScript</a>
            
        </div>
        
    </article>
    
    <p>本文代表个人观点，内容仅供参考。若有不恰当之处，望不吝赐教！</p>
    
    
<div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    var disqus_config = function () {
        this.page.url = 'https://haohaio.github.io/front-end/vue-patch-flags.html';
        this.page.identifier = 'front-end/vue-patch-flags.html';
    };
    (function () { // DON'T EDIT BELOW THIS LINE
        var d = document, disqus_shortname = 'haohaio', s = d.createElement('script');
        s.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
        Disqus.</a></noscript>

</div>
<script src="../js/busuanzi.pure.mini.js"></script>

            </div><!-- end #main-->
        </div><!-- end #body -->
        <footer class="footer">
    <div class="footer-inner">
        <p>
            <a href="/about" title="关于本站">
                关于本站</a>&nbsp;&nbsp<em>·</em>&nbsp;&nbsp
            <!-- 自定义链接 -->
            <!-- <a href="/help" title="help">急救中心</a>&nbsp;&nbsp<em>·</em>&nbsp;&nbsp -->
            <a href="/links" title="友情链接">友情链接</a>
            <!-- <a href="/app" title="App下载">App下载</a> -->
        </p>
        <p>
            本站点采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0
                国际许可协议</a>，已建立<a href="/timeline" id="siteBuildingTime"></a>天<br>
            ©2018 基于<a href="http://hexo.io" target="_blank">Hexo</a>搭建
            ，主题&nbsp<a href="https://github.com/tangkunyin/hexo-theme-jsimple" target="_blank">JSimple</a>
            ，作者<a href="https://haohaio.github.io/" target="_blank">haohaio</a>
        </p>
        
<!-- Tencent Analytics -->
<script type="text/javascript" src="//tajs.qq.com/stats?sId=66143495" charset="UTF-8"></script>


    </div>
</footer>
<script src="../js/InsightSearch.js"></script>
<script src="../js/SimpleCore.js"></script>
    </div>
    <div class="fixed-btn">
        <a class="btn-gotop" href="javascript:"> <i class="fa fa-angle-up"></i></a>
    </div>
    <script>
        $(function() {
            SimpleCore.init({
                buildingTime: '12/08/2018',
                current: $('.post-tags').length > 0 ? 'post' : 'archive',
                wxQRCode: '/images/wx-qrcode.png',
                donateImg: '/images/donate-qr.png',
            });
        });
    </script>
</body>

</html>